<body onload="update()">
  <% javascript_include_tag "distribbox" %>

  
    <!-- h1>Index </h1> --!>
<div style="margin-left:20px">


<%= form_for :session, url: pages_result_path, :html => { :method => 'POST' } do |f| %>
  <p><%= f.label "Tone Bank:" %>
  <%#= f.input(:tonebank) %>
  <%= f.select(:tonebank, @articles.collect {|r| r.title }) %></p>
  <p><%= f.label "Number of Cycles:" %>
  <%= f.number_field(:numcycles, in: 4..256, :value =>16) %></p>
  <p><%= f.label "BPM:" %>
  <%= f.number_field(:bpm, in: 1..255,:value =>120) %></p>
  
  <p><%= f.label "Swing:" %>
  <%= f.number_field(:swing1, in: 1..7,:value =>1) %> 
  : <%= f.number_field(:swing2, in: 1..7,:value =>1) %>
  : <%= f.number_field(:swing3, in: 1..7,:value =>1) %></p>
  
    <p><%= f.label "Shaker:" %>
    <% (0..11).each do |i| %>
        <%= f.check_box("shaker[#{i}]",:checked => (i%3==0?true:false)) %>
        <%= raw("&nbsp") if i % 3 == 2 && i<11 %>
    <% end %>
  </p>
  
    <p><%= f.label "Join repeated notes within a word:" %>
  <%= f.check_box(:repeat,:value =>false) %></p>

  <p><%= f.label "Solo instrument:" %>
  <%= f.select :instr, options_for_select(PagesHelper::GM_PATCH_NAMES, selected: PagesHelper::GM_PATCH_NAMES[73]) %></p>
  
  <b> Solo instrument range (mid C = 60):</b>
  
  <p><%= f.label "bottom:" %>
  <%= f.number_field(:bottom, in: 1..255,:value =>55) %>
  <%= f.label "top:" %>
  <%= f.number_field(:top, in: 1..255,:value =>79) %></p>
  <b>
  <p><%= f.label "First phrase length:" %>
  <%= f.number_field(:initlen, in: 1..7,:value =>3) %></p>
    <p><%= f.label "Minimum phrase rhythmic variation:" %>
  <%= f.number_field(:minrhythmvar, in: 0..20,:value =>1) %></p>
  <p><%= f.label "Maximum phrase rhythmic variation:" %>
  <%= f.number_field(:maxrhythmvar, in: 0..20,:value =>1) %></p>

  <b> Melodic movement probability distribution:</b>
  <div style="font-size:8px">



  <table frame = "box">
    <tr>
      <% (-12..12).each do |i| %>
      <%= content_tag :td, align: "center" do %>
        <% "#{i}" %>
      <% end %>
      <% end %>
    </tr>
     <tr>
      <% (0..24).each do |i| %>
        <%= content_tag :td, align: "center" do %>
          <%#= f.label "label_#{i}", id: "cycles_label_#{i}" %>
          <%= f.number_field("numvals[#{i}]", in: 0..100, id: "vals_box_#{i}", :value =>100, :onchange => "changerect(#{i})" ) %>
        <% end %>
      <% end %>
    </tr>
    <tr>
      <% (0..24).each do |i| %>
        <%= content_tag :td, align: "center", id: "distrib_#{i}" do %>
        <% end %>
      <% end %>
    </tr>
    <tr>
      <% (0..24).each do |i| %>
        <%= content_tag :td, align: "center", id: "perc_#{i}" do %>
        0
        <% end %>
      <% end %>
    </tr>


  </table>

</div>
      <p> <%= f.label "Mean:" %>
      <%= f.number_field("Binomial", in: 1..200, id: "binomial_box", :value =>40 ) %>
      <%= f.button "Update", :type => "button",:onclick => "update()" %></p> 

  <p><%= f.submit "Generate", :type => "button",:onclick => "document.forms[0].submit()" %></p> 
  
 
<% end %>
</div>

</body>